<mat-toolbar>
    <div>Tactical session</div>
    <div class="div-spacer"></div>
    <button mat-button *ngIf="!isEditMode()" (click)="navigateToTacticalView()">Open</button>
    <button mat-button *ngIf="isEditMode()" (click)="cancelEdit()">Cancel</button>
    <button mat-button *ngIf="isEditMode()" (click)="save()">
        <mat-icon>save_alt</mat-icon>
    </button>
    <button mat-button *ngIf="!isEditMode()" (click)="startEdit()">
        <mat-icon>edit</mat-icon>
    </button>
    <button mat-button (click)="delete()">
        <mat-icon>delete</mat-icon>
    </button>
</mat-toolbar>

<div class="outerContainer">

    <form [formGroup]="form">
        <mat-form-field appearance="outline" class="common-form-field">
            <mat-label>Strategic session</mat-label>
            <input matInput value="{{this.strategicSession.name}}" readonly>
            <mat-icon matSuffix (click)="navigateToStrategicSession()" class="u-mat-icon-button">launch</mat-icon>
        </mat-form-field>
        <br>
        <mat-form-field appearance="outline" class="common-form-field">
            <mat-label>Name</mat-label>
            <input matInput formControlName="name">
        </mat-form-field>
        <br>
        <mat-form-field appearance="outline" class="common-form-field">
            <mat-label>Description</mat-label>
            <textarea matInput formControlName="description"></textarea>
        </mat-form-field>
        <br>
        <mat-form-field appearance="outline" class="common-form-field">
            <mat-label>State</mat-label>
            <input matInput value="{{this.tacticalSession.state}}" readonly>
        </mat-form-field>
        <br>
        <mat-form-field appearance="outline" class="common-form-field">
            <mat-label>Round</mat-label>
            <input matInput value="{{this.tacticalSession.currentRound}}" readonly>
        </mat-form-field>
    </form>

    <h3>Characters</h3>

    <mat-grid-list cols="5" rowHeight="100px">
        <mat-grid-tile *ngFor="let ctx of tacticalCharacterContexts" [colspan]=1 [rowspan]=1>
            <mat-card class="character-context-card">
                <span>{{ctx.name}}</span>
                <button mat-button (click)="deleteTacticalCharacterContext(ctx.id)">
                    <mat-icon>delete</mat-icon>
                </button>
            </mat-card>
        </mat-grid-tile>
    </mat-grid-list>

    <br>

    <form class="example-form">
        <mat-form-field class="common-form-field" appearance="outline">
            <mat-label>Npc</mat-label>
            <input matInput aria-label="Npc" [matAutocomplete]="auto" [formControl]="npcAddFormControl">
            <mat-autocomplete #auto="matAutocomplete" [displayWith]="displayNpcOption">
                <mat-option *ngFor="let npc of npcAddFiltered | async" [value]="npc">
                    {{npc.name}}
                </mat-option>
            </mat-autocomplete>
        </mat-form-field>
        <button mat-button (click)="addNpc()">
            <mat-icon>add</mat-icon>
        </button>
    </form>

</div>

<hr>

<pre>{{npcAddFormControl.value | json}}</pre>