<mat-toolbar>
    <span>Tactical view</span>
    <div class="div-spacer"></div>
    <button mat-button (click)="startRound()">Start round</button>
    <button mat-button>Calculate initiatives</button>
    <button mat-button>Execute actions</button>
</mat-toolbar>

<div class="outerContainer">

    <div fxLayout="row" fxLayoutGap="10px">
        <div fxFlex="20" fxLayoutAlign="left center" class="div-tactical">Character</div>
        <div fxFlex="10" fxLayoutAlign="center center" class="div-tactical">Swap</div>
        <div fxFlex="10" fxLayoutAlign="center center" class="div-tactical">Normal</div>
        <div fxFlex="10" fxLayoutAlign="center center" class="div-tactical">Deliberate</div>
        <div fxFlex="10" fxLayoutAlign="center center" class="div-tactical">init roll</div>
        <div fxFlex="10" fxLayoutAlign="center center" class="div-tactical">initiative</div>
    </div>

    <div fxLayout="row" fxLayoutGap="10px" *ngFor="let character of characters">
        <div fxFlex="20" fxLayoutAlign="left center" class="div-tactical">
            <mat-card>
                {{character.name}}
                
            </mat-card>
        </div>
        <div fxFlex="10" fxLayoutAlign="left center" class="action-declaration">
            <app-tactical-view-character-action
                [source]="character.id"
                [priority]="'snap'"
                [tacticalRound]="this.tacticalRound"
                [characters]="this.characters"
                [action]="getAction(character.id, 'snap')"
                (actionsUpdated)="this.loadActions(this.tacticalRound.id)">
            </app-tactical-view-character-action>
        </div>
        <div fxFlex="10" fxLayoutAlign="left center" class="action-declaration">
            <app-tactical-view-character-action
                [source]="character.id"
                [priority]="'normal'"
                [tacticalRound]="this.tacticalRound"
                [characters]="this.characters"
                [action]="getAction(character.id, 'normal')"
                (actionsUpdated)="this.loadActions(this.tacticalRound.id)">
            </app-tactical-view-character-action>
        </div>
        <div fxFlex="10" fxLayoutAlign="left center" class="action-declaration">
            <app-tactical-view-character-action
                [source]="character.id"
                [priority]="'deliberate'"
                [tacticalRound]="this.tacticalRound"
                [characters]="this.characters"
                [action]="getAction(character.id, 'deliberate')"
                (actionsUpdated)="this.loadActions(this.tacticalRound.id)">
            </app-tactical-view-character-action>
        </div>
        <div fxFlex="10" fxLayoutAlign="center center" class="div-tactical">
            <mat-form-field class="initiative-form-field" appearance="outline" style="width: 80%;">
                <mat-label>Roll</mat-label>
                <input matInput placeholder="Roll" value="">
              </mat-form-field>
        </div>
        <div fxFlex="10" fxLayoutAlign="center center" class="div-tactical">
            <mat-form-field class="initiative-form-field" appearance="outline" style="width: 80%;">
                <mat-label>Roll</mat-label>
                <input matInput placeholder="Roll" value="">
              </mat-form-field>
        </div>
    </div>
</div>

<br>
<br>

<mat-accordion>
    <mat-expansion-panel hideToggle>
        <mat-expansion-panel-header>
            <mat-panel-title>
                Debug
            </mat-panel-title>
        </mat-expansion-panel-header>
        Context:
        <pre>{{tacticalSession | json}}</pre>
        Round:
        <pre>{{tacticalRound | json}}</pre>
        Actions:
        <pre>{{actions | json}}</pre>
        Characters:
        <pre>{{characters | json}}</pre>
    </mat-expansion-panel>
</mat-accordion>