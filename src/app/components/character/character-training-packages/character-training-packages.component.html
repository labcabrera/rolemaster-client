<div class="outerContainer">
    <div fxLayout="row" fxLayoutGap="15px">

        <div>
            <mat-form-field appearance="outline">
                <mat-label>Training package</mat-label>
                <mat-select [formControl]="selectedTrainingPackage" required (selectionChange)="onTrainingPackageSelection()">
                    <mat-option *ngFor="let trainingPackage of trainingPackages" [value]="trainingPackage">
                        {{getTrainingPackageOptionName(trainingPackage)}}
                    </mat-option>
                </mat-select>
            </mat-form-field>
        </div>
        <div>
            <mat-form-field appearance="outline">
                <mat-label>Cost</mat-label>
                <input matInput [(ngModel)]="cost" disabled="true">
            </mat-form-field>
        </div>
        <div>
            <mat-form-field appearance="outline">
                <mat-label>Type</mat-label>
                <input matInput [(ngModel)]="selectedTrainingPackage.value.type" disabled="true">
            </mat-form-field>
        </div>
        <div>
            <mat-form-field appearance="outline">
                <mat-label>Time acquisition</mat-label>
                <input matInput [(ngModel)]="selectedTrainingPackage.value.timeAcquisition" disabled="true">
            </mat-form-field>
        </div>
        <div>
            <button mat-button (click)="addTrainingPackage()" [disabled]="addForm.invalid">Add</button>
        </div>
    </div>

    <div fxLayout="row" [formGroup]="addForm" *ngIf="addForm.value.categorySelection">
        <div fxFlex="50">
            <div formArrayName="categorySelection">
                <div *ngFor="let option of categorySelections.controls; let i = index">
                    <div [formGroupName]="i">
                        <span>
                            {{option.value['description']}}
                        </span>
                        <mat-form-field appearance="outline">
                            <mat-label>Category</mat-label>
                            <mat-select formControlName="categoryId">
                                <mat-option *ngFor="let category of getSkillCategoriesByGroup(option.value['group'])" [value]="category.id">
                                    {{category.name}}
                                </mat-option>
                            </mat-select>
                        </mat-form-field>
                        <mat-form-field appearance="outline">
                            <mat-label>Ranks</mat-label>
                            <mat-select formControlName="ranks">
                                <mat-option *ngFor="let i of [0,1,2,3,4,5]" [value]="i">{{i}}</mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div>
                </div>
            </div>
        </div>
        <div fxFlex="50" *ngIf="addForm.value.skillSelection">
            <div formArrayName="skillSelection">
                <div *ngFor="let option of skillSelections.controls; let i = index">
                    <div [formGroupName]="i" fxLayout="row">
                        <div fxFlex="50">
                            {{option.value['description']}}
                        </div>
                        <div fxFlex="25">
                            <mat-form-field appearance="outline">
                                <mat-label>Category</mat-label>
                                <mat-select formControlName="skillId">
                                    <mat-option *ngFor="let category of getSkillsByCategory(option.value['categories'])" [value]="category.id">{{category.name}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>
                        <div fxFlex="25">
                            <mat-form-field appearance="outline">
                                <mat-label>Ranks</mat-label>
                                <mat-select formControlName="ranks">
                                    <mat-option *ngFor="let i of [0,1,2,3,4,5]" [value]="i">{{i}}</mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<hr>

<div fxLayout="row">
    <div fxFlex="50">
        <pre>{{selectedTrainingPackage.value | json}}</pre>
    </div>
    <div fxFlex="50">
        <pre>{{addForm.value | json}}</pre>
    </div>
</div>